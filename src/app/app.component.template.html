<div (window:resize)="handler.onResize($event)" class="main" [attr.init]="initScreen()">
  <h1 class="banner">
    Chess Puzzles 3d
  </h1>
  <div class="container section">
    <div class="row">
      <div class="col-2">
        <input checked type="radio" name="selProjectionType" (click)="handler.setPerspectiveModeWhite()" /><span
          class="largeLabel">White</span>
      </div>
      <div class="col-2">
        <input type="radio" name="selProjectionType" (click)="handler.setPerspectiveModeBlack()" /><span
          class="largeLabel">Black</span>
      </div>
    </div>
  </div>
  <canvas class="responsive-canvas" (click)="handler.app.start()" id="gl_canvas"></canvas>
  <div [hidden]="!question || (question === 'undefined') || !answer || (answer === 'haqrsvarq')">
    <div>
      <span class="largeLabel">Puzzle Question:</span> <span class='questionAnswer'>{{question}}</span> <span
        class='questionAnswer'><strong>{{showAnswer ? answer : '' }}</strong></span>
    </div>
    <div class="button-container">
      <button type="button" class="styled-button" (click)="handler.toggleShow()">Show answer</button>
    </div>
  </div>
  <div class="button-container">
    <a href={{reverseQuery}} class="styled-button-href" target="_blank" rel="noreferrer noopener">Editor</a>
  </div>
  <details>
    <summary>Debug</summary>
    <details>
      <summary>Misc</summary>
      <div class="container section">
        <div class="row">
          <div class="col-2">
            <button class="btn btn-primary" (click)="start()">Redraw</button>
          </div>
        </div>
        <div class="row">
          <div class="col-2">
            <input type="radio" name="selProjectionType" (click)="handler.setPerspectiveModeWhiteQueen()" /><span
              class="largeLabel">a5</span>
          </div>
          <div class="col-2">
            <input type="radio" name="selProjectionType" (click)="handler.setOrthoMode()" /><span
              class="largeLabel">Top</span>
          </div>
        </div>
      </div>
    </details>
    <details>
      <summary>Transform</summary>
      <div class="container section">
        <div class="row">
          <div class="col-3">
            <span class="smallLabel">Scale</span>
          </div>
          <div class="col-3">
            <div class="smallLabel">X</div> <input step="0.1" [(ngModel)]="scale.x" #ctrl="ngModel" (change)="start()"
              type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Y</div> <input step="0.1" [(ngModel)]="scale.y" #ctrl="ngModel" (change)="start()"
              type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Z</div> <input step="0.1" [(ngModel)]="scale.z" #ctrl="ngModel" (change)="start()"
              type="number" />
          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <span class="smallLabel">Translate</span>
          </div>
          <div class="col-3">
            <div class="smallLabel">X</div><input step="0.1" [(ngModel)]="translate.x" #ctrl="ngModel"
              (change)="start()" type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Y</div><input step="0.1" [(ngModel)]="translate.y" #ctrl="ngModel"
              (change)="start()" type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Z</div><input step="0.1" [(ngModel)]="translate.z" #ctrl="ngModel"
              (change)="start()" type="number" />
          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <span class="smallLabel">Rotate</span>
          </div>
          <div class="col-3">
            <div class="smallLabel">X</div> <input step="1" [(ngModel)]="rotation.x" #ctrl="ngModel" (change)="start()"
              type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Y</div> <input step="1" [(ngModel)]="rotation.y" #ctrl="ngModel" (change)="start()"
              type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Z</div> <input step="1" [(ngModel)]="rotation.z" #ctrl="ngModel" (change)="start()"
              type="number" />
          </div>
        </div>
      </div>
    </details>
    <details>
      <summary>Perspective</summary>
      <div class="container section">
        <div class="row">
          <div class="col-3">
            <div class="smallLabel">Angle</div><input [disabled]="projectionType =='ORTHO'" step="0.1"
              [(ngModel)]="perspective.fieldOfView" #ctrl="ngModel" (change)="start()" type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Aspect</div><input [disabled]="projectionType =='ORTHO'" step="0.1"
              [(ngModel)]="perspective.aspectRatio" #ctrl="ngModel" (change)="start()" type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Near</div><input [disabled]="projectionType =='ORTHO'" step="0.1"
              [(ngModel)]="perspective.near" #ctrl="ngModel" (change)="start()" type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Far</div><input [disabled]="projectionType =='ORTHO'" step="0.1"
              [(ngModel)]="perspective.far" #ctrl="ngModel" (change)="start()" type="number" />
          </div>
        </div>
      </div>
    </details>
    <details>
      <summary>View</summary>
      <div class="container section">
        <div class="row">
          <div class="col-3">
            <span class="smallLabel">Up</span>
          </div>
          <div class="col-3">
            <div class="smallLabel">X</div><input step="0.1" [(ngModel)]="up.x" #ctrl="ngModel" (change)="start()"
              type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Y</div><input step="0.1" [(ngModel)]="up.y" #ctrl="ngModel" (change)="start()"
              type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Z</div><input step="0.1" [(ngModel)]="up.z" #ctrl="ngModel" (change)="start()"
              type="number" />
          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <span class="smallLabel">Eye</span>
          </div>
          <div class="col-3">
            <div class="smallLabel">X</div><input step="0.1" [(ngModel)]="eye.x" #ctrl="ngModel" (change)="start()"
              type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Y</div><input step="0.1" [(ngModel)]="eye.y" #ctrl="ngModel" (change)="start()"
              type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Z</div><input step="0.1" [(ngModel)]="eye.z" #ctrl="ngModel" (change)="start()"
              type="number" />
          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <span class="smallLabel">LookAt</span>
          </div>
          <div class="col-3">
            <div class="smallLabel">X</div><input step="0.1" [(ngModel)]="look.x" #ctrl="ngModel" (change)="start()"
              type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Y</div><input step="0.1" [(ngModel)]="look.y" #ctrl="ngModel" (change)="start()"
              type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Z</div><input step="0.1" [(ngModel)]="look.z" #ctrl="ngModel" (change)="start()"
              type="number" />
          </div>
        </div>
      </div>
    </details>
    <details>
      <summary>Lighting</summary>
      <div class="container section">
        <div class="row">
          <div class="col-3">
            <span class="smallLabel">Directional</span>
          </div>
          <div class="col-3">
            <div class="smallLabel">X</div><input [disabled]="lightingType =='POINT_LIGHT'" step="0.1"
              [(ngModel)]="directionalLight.x" #ctrl="ngModel" (change)="start()" type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Y</div><input [disabled]="lightingType =='POINT_LIGHT'" step="0.1"
              [(ngModel)]="directionalLight.z" #ctrl="ngModel" (change)="start()" type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Z</div><input [disabled]="lightingType =='POINT_LIGHT'" step="0.1"
              [(ngModel)]="directionalLight.z" #ctrl="ngModel" (change)="start()" type="number" />
          </div>
        </div>
        <div class="row">
          <div class="col-3">
            <span class="smallLabel">Point</span>
          </div>
          <div class="col-3">
            <div class="smallLabel">X</div><input [disabled]="lightingType =='DIRECTIONAL_LIGHT'" step="0.1"
              [(ngModel)]="pointLight.x" #ctrl="ngModel" (change)="start()" type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Y</div><input [disabled]="lightingType =='DIRECTIONAL_LIGHT'" step="0.1"
              [(ngModel)]="pointLight.y" #ctrl="ngModel" (change)="start()" type="number" />
          </div>
          <div class="col-3">
            <div class="smallLabel">Z</div><input [disabled]="lightingType =='DIRECTIONAL_LIGHT'" step="0.1"
              [(ngModel)]="pointLight.z" #ctrl="ngModel" (change)="start()" type="number" />
          </div>
        </div>
      </div>
    </details>
  </details>
</div>